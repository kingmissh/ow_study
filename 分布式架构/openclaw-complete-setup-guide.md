# OpenClaw Gateway + Node å®Œæ•´é…ç½®æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [æ¶æ„è¯´æ˜](#æ¶æ„è¯´æ˜)
2. [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
3. [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
4. [é¢„æœŸæ•ˆæœ](#é¢„æœŸæ•ˆæœ)
5. [å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•](#å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•)
6. [å®Œæ•´é…ç½®æµç¨‹](#å®Œæ•´é…ç½®æµç¨‹)
7. [ç«¯åˆ°ç«¯æµ‹è¯•æ­¥éª¤](#ç«¯åˆ°ç«¯æµ‹è¯•æ­¥éª¤)
8. [å®æˆ˜ç¤ºä¾‹](#å®æˆ˜ç¤ºä¾‹)
9. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
10. [é«˜çº§é…ç½®](#é«˜çº§é…ç½®)
11. [å¸¸è§é—®é¢˜è§£ç­”](#å¸¸è§é—®é¢˜è§£ç­”-faq)
12. [æ€»ç»“](#æ€»ç»“)

---

## æ ¸å¿ƒæ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ Gateway å’Œ Nodeï¼Ÿ

**Gatewayï¼ˆç½‘å…³ï¼‰**
- è¿è¡Œåœ¨ Linux ä¸»æœºä¸Šçš„ä¸­å¤®æ§åˆ¶å™¨
- è´Ÿè´£æ¥æ”¶æ¶ˆæ¯ã€ç®¡ç†ä¼šè¯ã€è°ƒç”¨ AI æ¨¡å‹
- é€šè¿‡ WebSocket ä¸ Node é€šä¿¡
- ç›‘å¬ç«¯å£ï¼š18789ï¼ˆå¯é…ç½®ï¼‰

**Nodeï¼ˆèŠ‚ç‚¹ï¼‰**
- è¿è¡Œåœ¨ Windows è™šæ‹Ÿæœºä¸Šçš„ä»»åŠ¡æ‰§è¡Œå™¨
- é€šè¿‡ WebSocket è¿æ¥åˆ° Gateway
- æ‰§è¡Œå…·ä½“ä»»åŠ¡ï¼šæµè§ˆå™¨æ“ä½œã€æ–‡ä»¶å¤„ç†ã€å‘½ä»¤æ‰§è¡Œ
- éœ€è¦å…ˆé…å¯¹æ‰èƒ½ä½¿ç”¨

### è®¤è¯æµç¨‹

```
1. Windows Node å¯åŠ¨ â†’ å‘é€é…å¯¹è¯·æ±‚åˆ° Gateway
2. Linux Gateway æ”¶åˆ°è¯·æ±‚ â†’ æ˜¾ç¤ºåœ¨å¾…æ‰¹å‡†åˆ—è¡¨
3. ç®¡ç†å‘˜æ‰¹å‡† â†’ Gateway ç”Ÿæˆ Token å¹¶å‘é€ç»™ Node
4. Node ä¿å­˜ Token â†’ åç»­è‡ªåŠ¨ä½¿ç”¨ Token è®¤è¯
5. è¿æ¥å»ºç«‹ â†’ å¯ä»¥å¼€å§‹æ‰§è¡Œä»»åŠ¡
```

**å…³é”®ç‚¹ï¼š**
- é¦–æ¬¡è¿æ¥ä¸éœ€è¦æ‰‹åŠ¨é…ç½® Token
- é…å¯¹æ‰¹å‡†åï¼ŒToken è‡ªåŠ¨ä¿å­˜åœ¨ `node.json`
- é‡å¯ Node ä¼šè‡ªåŠ¨ä½¿ç”¨ä¿å­˜çš„ Token
- å¦‚æœé…å¯¹å¤±è´¥ï¼Œåˆ é™¤ `node.json` é‡æ–°é…å¯¹

---

## æ¶æ„è¯´æ˜

### ç³»ç»Ÿæ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¶ˆæ¯å¹³å°å±‚                                  â”‚
â”‚  Telegram â”‚ WhatsApp â”‚ Discord â”‚ iMessage â”‚ Slack            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Linux ä¸»æœº (192.168.2.134)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  OpenClaw Gateway (ç«¯å£ 18789)                       â”‚    â”‚
â”‚  â”‚  - ä¼šè¯ç®¡ç†                                           â”‚    â”‚
â”‚  â”‚  - æ¶ˆæ¯è·¯ç”±                                           â”‚    â”‚
â”‚  â”‚  - AI æ¨¡å‹è°ƒç”¨                                        â”‚    â”‚
â”‚  â”‚  - ä»»åŠ¡åˆ†å‘                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                 â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æµè§ˆå™¨æ§åˆ¶æœåŠ¡ (ç«¯å£ 18800)                         â”‚    â”‚
â”‚  â”‚  - Chrome CDP æ§åˆ¶                                   â”‚    â”‚
â”‚  â”‚  - ç½‘é¡µè‡ªåŠ¨åŒ–                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ WebSocket (ç«¯å£ 18789)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Windows è™šæ‹Ÿæœº (192.168.2.146)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  OpenClaw Node                                       â”‚    â”‚
â”‚  â”‚  - æ¥æ”¶ä»»åŠ¡                                           â”‚    â”‚
â”‚  â”‚  - æ‰§è¡Œæµè§ˆå™¨æ“ä½œ                                     â”‚    â”‚
â”‚  â”‚  - æ–‡ä»¶å¤„ç†                                           â”‚    â”‚
â”‚  â”‚  - è¿”å›ç»“æœ                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                 â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Chrome æµè§ˆå™¨ (CDP ç«¯å£ 18801)                      â”‚    â”‚
â”‚  â”‚  - ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®ç›®å½•                                 â”‚    â”‚
â”‚  â”‚  - ç‹¬ç«‹çš„æµè§ˆå™¨æŒ‡çº¹                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### Gatewayï¼ˆç½‘å…³ - Linux ä¸»æœºï¼‰
- **è§’è‰²**ï¼šä¸­å¤®æ§åˆ¶ä¸­å¿ƒ
- **èŒè´£**ï¼š
  - æ¥æ”¶æ¥è‡ªæ¶ˆæ¯å¹³å°çš„è¯·æ±‚
  - ç®¡ç†æ‰€æœ‰ä¼šè¯å’Œå¯¹è¯å†å²
  - è°ƒç”¨ AI æ¨¡å‹è¿›è¡Œå†³ç­–
  - å°†ä»»åŠ¡åˆ†å‘åˆ°ä¸åŒçš„ Node
  - èšåˆç»“æœå¹¶è¿”å›

#### Nodeï¼ˆèŠ‚ç‚¹ - Windows è™šæ‹Ÿæœºï¼‰
- **è§’è‰²**ï¼šä»»åŠ¡æ‰§è¡Œå™¨
- **èŒè´£**ï¼š
  - è¿æ¥åˆ° Gateway
  - æ¥æ”¶å¹¶æ‰§è¡Œå…·ä½“ä»»åŠ¡
  - æ§åˆ¶æœ¬åœ°æµè§ˆå™¨
  - å¤„ç†æ–‡ä»¶æ“ä½œ
  - æŠ¥å‘Šæ‰§è¡Œç»“æœ

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¤šè´¦å·å®‰å…¨ç®¡ç† ğŸ”
**éœ€æ±‚**ï¼šç®¡ç†å¤šä¸ªç¤¾äº¤åª’ä½“è´¦å·ï¼Œé¿å…è´¦å·å…³è”

**å®ç°æ–¹å¼**ï¼š
- Node 1 (Windows VM 1)ï¼šè´¦å· A çš„ç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒ
- Node 2 (Windows VM 2)ï¼šè´¦å· B çš„ç‹¬ç«‹æµè§ˆå™¨ç¯å¢ƒ
- Gateway (Linux)ï¼šç»Ÿä¸€æ¥æ”¶ Telegram æŒ‡ä»¤

**æ•ˆæœ**ï¼š
```
ä½ åœ¨ Telegram å‘é€ï¼š
"@openclaw target:è´¦å·A å‘å¸ƒä»Šå¤©çš„æ¨æ–‡"

â†’ Gateway è·¯ç”±åˆ° Node 1
â†’ Node 1 åœ¨ç‹¬ç«‹æµè§ˆå™¨ä¸­ç™»å½•è´¦å· A
â†’ è‡ªåŠ¨å‘å¸ƒæ¨æ–‡
â†’ ç»“æœè¿”å›åˆ° Telegram
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¯ä¸ªè´¦å·ç‹¬ç«‹çš„æµè§ˆå™¨æŒ‡çº¹
- âœ… ä¸åŒçš„ IP åœ°å€ï¼ˆå¦‚æœè™šæ‹Ÿæœºé…ç½®ä¸åŒç½‘ç»œï¼‰
- âœ… å®Œå…¨éš”ç¦»çš„ Cookie å’Œç¼“å­˜
- âœ… é™ä½è´¦å·å…³è”é£é™©

### åœºæ™¯ 2ï¼šè™šæ‹Ÿæœºå®‰å…¨æµ‹è¯• ğŸ›¡ï¸
**éœ€æ±‚**ï¼šæµ‹è¯•å¯ç–‘ç½‘ç«™æˆ–è¿è¡Œä¸ä¿¡ä»»çš„è„šæœ¬

**å®ç°æ–¹å¼**ï¼š
- Gateway (Linux)ï¼šå®‰å…¨çš„æ§åˆ¶ç¯å¢ƒ
- Node (Windows VM)ï¼šéš”ç¦»çš„æµ‹è¯•ç¯å¢ƒ

**æ•ˆæœ**ï¼š
```
ä½ åœ¨ Telegram å‘é€ï¼š
"@openclaw target:æµ‹è¯•VM è®¿é—® suspicious-site.com å¹¶æˆªå›¾"

â†’ Gateway è½¬å‘åˆ°æµ‹è¯•è™šæ‹Ÿæœº
â†’ è™šæ‹Ÿæœºæ‰“å¼€æµè§ˆå™¨è®¿é—®
â†’ å³ä½¿è§¦å‘æ¶æ„ä»£ç ï¼Œä¹Ÿåªå½±å“è™šæ‹Ÿæœº
â†’ å®¿ä¸»æœºå®Œå…¨å®‰å…¨
```

**ä¼˜åŠ¿**ï¼š
- âœ… å®¿ä¸»æœºä¸å—å½±å“
- âœ… å¯ä»¥éšæ—¶å¿«ç…§å›æ»šè™šæ‹Ÿæœº
- âœ… éš”ç¦»çš„ç½‘ç»œç¯å¢ƒ
- âœ… å®‰å…¨åœ°æµ‹è¯•è‡ªåŠ¨åŒ–è„šæœ¬

### åœºæ™¯ 3ï¼šè·¨å¹³å°å¼€å‘æµ‹è¯• ğŸ’»
**éœ€æ±‚**ï¼šåœ¨ Linux å¼€å‘ï¼Œåœ¨ Windows æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§

**å®ç°æ–¹å¼**ï¼š
- Gateway (Linux)ï¼šå¼€å‘å’Œæ§åˆ¶ç¯å¢ƒ
- Node (Windows)ï¼šæµ‹è¯•ç¯å¢ƒ

**æ•ˆæœ**ï¼š
```
ä½ åœ¨ Linux ç»ˆç«¯æˆ– Telegram å‘é€ï¼š
"@openclaw target:Windows-VM åœ¨ Edge æµè§ˆå™¨æµ‹è¯•ç™»å½•æµç¨‹"

â†’ Windows VM ä½¿ç”¨ Edge æµè§ˆå™¨æ‰§è¡Œ
â†’ è‡ªåŠ¨æµ‹è¯•è¡¨å•å¡«å†™ã€æäº¤ã€éªŒè¯
â†’ æˆªå›¾å’Œæ—¥å¿—è¿”å›
â†’ æ— éœ€æ‰‹åŠ¨åˆ‡æ¢åˆ° Windows
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€ç¦»å¼€ Linux å·¥ä½œç¯å¢ƒ
- âœ… è‡ªåŠ¨åŒ–è·¨å¹³å°æµ‹è¯•
- âœ… ç»Ÿä¸€çš„æ§åˆ¶æ¥å£
- âœ… å¯æ‰©å±•åˆ°å¤šä¸ªæ“ä½œç³»ç»Ÿ

### åœºæ™¯ 4ï¼š24/7 è‡ªåŠ¨åŒ–ç›‘æ§ â°
**éœ€æ±‚**ï¼šæŒç»­ç›‘æ§ç½‘ç«™å˜åŒ–æˆ–æ‰§è¡Œå®šæ—¶ä»»åŠ¡

**å®ç°æ–¹å¼**ï¼š
- Gateway (Linux æœåŠ¡å™¨)ï¼šå§‹ç»ˆåœ¨çº¿
- Node (Windows VM)ï¼šæ‰§è¡Œæµè§ˆå™¨ä»»åŠ¡

**æ•ˆæœ**ï¼š
```
é…ç½®å®šæ—¶ä»»åŠ¡ï¼š
æ¯å°æ—¶æ£€æŸ¥ç«å“ä»·æ ¼

â†’ Gateway å®šæ—¶è§¦å‘
â†’ Node æ‰“å¼€æµè§ˆå™¨è®¿é—®ç«å“ç½‘ç«™
â†’ æå–ä»·æ ¼ä¿¡æ¯
â†’ å¦‚æœ‰å˜åŒ–ï¼Œé€šè¿‡ Telegram é€šçŸ¥
```

**ä¼˜åŠ¿**ï¼š
- âœ… æœåŠ¡å™¨çº§åˆ«çš„ç¨³å®šæ€§
- âœ… æ— éœ€æœ¬åœ°ç”µè„‘ä¸€ç›´å¼€æœº
- âœ… è‡ªåŠ¨é‡å¯å’Œé”™è¯¯æ¢å¤
- âœ… è¿œç¨‹æ§åˆ¶å’Œç›‘æ§

### åœºæ™¯ 5ï¼šæ•°æ®é‡‡é›†ä¸å¤„ç† ğŸ“Š
**éœ€æ±‚**ï¼šä»å¤šä¸ªç½‘ç«™é‡‡é›†æ•°æ®å¹¶æ±‡æ€»

**å®ç°æ–¹å¼**ï¼š
- Gatewayï¼šä»»åŠ¡è°ƒåº¦å’Œæ•°æ®æ±‡æ€»
- å¤šä¸ª Nodeï¼šå¹¶è¡Œé‡‡é›†ä¸åŒç½‘ç«™

**æ•ˆæœ**ï¼š
```
ä½ åœ¨ Telegram å‘é€ï¼š
"@openclaw é‡‡é›†ä»Šå¤©çš„æ–°é—»å¤´æ¡"

â†’ Gateway åˆ†é…ä»»åŠ¡ï¼š
  - Node 1: é‡‡é›†ç½‘ç«™ A
  - Node 2: é‡‡é›†ç½‘ç«™ B
  - Node 3: é‡‡é›†ç½‘ç«™ C
â†’ å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡
â†’ Gateway æ±‡æ€»ç»“æœ
â†’ ç”ŸæˆæŠ¥å‘Šå‘é€åˆ° Telegram
```

**ä¼˜åŠ¿**ï¼š
- âœ… å¹¶è¡Œå¤„ç†ï¼Œé€Ÿåº¦å¿«
- âœ… åˆ†å¸ƒå¼æ¶æ„ï¼Œå¯æ‰©å±•
- âœ… ç»Ÿä¸€çš„æ•°æ®æ±‡æ€»
- âœ… è‡ªåŠ¨åŒ–ç«¯åˆ°ç«¯æµç¨‹

---

## é¢„æœŸæ•ˆæœ

### 1. è¿œç¨‹æ§åˆ¶èƒ½åŠ›
é€šè¿‡ä»»ä½•æ¶ˆæ¯å¹³å°ï¼ˆTelegramã€WhatsApp ç­‰ï¼‰æ§åˆ¶ï¼š
- âœ… åœ¨ Windows è™šæ‹Ÿæœºæ‰“å¼€æµè§ˆå™¨
- âœ… æœç´¢å†…å®¹å¹¶æå–ä¿¡æ¯
- âœ… å¡«å†™è¡¨å•å¹¶æäº¤
- âœ… æˆªå›¾å¹¶å‘é€å›æ¥
- âœ… ä¸‹è½½æ–‡ä»¶
- âœ… æ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡

### 2. ç¯å¢ƒéš”ç¦»
- âœ… æ¯ä¸ª Node ç‹¬ç«‹çš„æµè§ˆå™¨ç¯å¢ƒ
- âœ… ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®ç›®å½•
- âœ… ç‹¬ç«‹çš„æµè§ˆå™¨æŒ‡çº¹
- âœ… äº’ä¸å¹²æ‰°çš„ä¼šè¯

### 3. çµæ´»è°ƒåº¦
- âœ… åŠ¨æ€æŒ‡å®šä»»åŠ¡åœ¨å“ªä¸ª Node æ‰§è¡Œ
- âœ… è´Ÿè½½å‡è¡¡
- âœ… æ•…éšœè½¬ç§»
- âœ… ä¼˜å…ˆçº§æ§åˆ¶

### 4. å®‰å…¨æ€§
- âœ… Token è®¤è¯
- âœ… åŠ å¯†é€šä¿¡
- âœ… è™šæ‹Ÿæœºéš”ç¦»
- âœ… å®¡è®¡æ—¥å¿—

---

---

## å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å• âœ…

### Linux Gateway é…ç½®
- [ ] Node.js 22+ å·²å®‰è£… (`node -v`)
- [ ] OpenClaw å·²å®‰è£… (`openclaw --version`)
- [ ] é˜²ç«å¢™å…è®¸ 18789 ç«¯å£ (`sudo ufw allow 18789/tcp`)
- [ ] Gateway é…ç½®æ–‡ä»¶å·²åˆ›å»º (`~/.openclaw/openclaw.json`)
- [ ] Gateway æ­£åœ¨è¿è¡Œ (`openclaw gateway status`)
- [ ] å¯ä»¥è®¿é—® Web ç•Œé¢ (`http://192.168.2.134:18789`)

### Windows Node é…ç½®
- [ ] Node.js 22+ å·²å®‰è£… (`node -v`)
- [ ] OpenClaw å·²å®‰è£… (`openclaw --version`)
- [ ] Node é…ç½®æ–‡ä»¶å·²åˆ›å»º (`$env:USERPROFILE\.openclaw\openclaw.json`)
- [ ] Node å·²å¯åŠ¨å¹¶å‘é€é…å¯¹è¯·æ±‚
- [ ] åœ¨ Gateway ä¸Šæ‰¹å‡†äº†é…å¯¹è¯·æ±‚ (`openclaw nodes approve <id>`)
- [ ] Node æ˜¾ç¤ºè¿æ¥æˆåŠŸ
- [ ] node.json æ–‡ä»¶å·²è‡ªåŠ¨ç”Ÿæˆ

### æƒé™é…ç½®
- [ ] æ‰§è¡Œæƒé™å·²é…ç½® (`openclaw approvals --node Windows-VM`)
- [ ] æµè§ˆå™¨ä»£ç†å·²å¯ç”¨ï¼ˆNode æ—¥å¿—ä¸­æ˜¾ç¤ºï¼‰

### è¿æ¥éªŒè¯
- [ ] Gateway å¯ä»¥çœ‹åˆ° Node (`openclaw nodes list`)
- [ ] ç½‘ç»œè¿æ¥å·²å»ºç«‹ (`netstat` æ˜¾ç¤º ESTABLISHED)
- [ ] å¯ä»¥é€šè¿‡ Telegram å‘é€æµ‹è¯•æ¶ˆæ¯

### æµ‹è¯•ä»»åŠ¡
- [ ] å‘é€ç®€å•å‘½ä»¤æµ‹è¯•ï¼ˆå¦‚ `echo hello`ï¼‰
- [ ] æµ‹è¯•æµè§ˆå™¨æ“ä½œï¼ˆå¦‚è®¿é—®ç½‘é¡µå¹¶æˆªå›¾ï¼‰
- [ ] éªŒè¯ä»»åŠ¡è·¯ç”±åˆ°æ­£ç¡®çš„ Node

---

## å®Œæ•´é…ç½®æµç¨‹

### é˜¶æ®µ 1ï¼šLinux Gateway é…ç½®ï¼ˆå·²å®Œæˆ âœ…ï¼‰

#### 1.1 é˜²ç«å¢™é…ç½®
```bash
# å…è®¸ Gateway ç«¯å£
sudo ufw allow 18789/tcp

# éªŒè¯
sudo ufw status
```

#### 1.2 Gateway é…ç½®æ–‡ä»¶
ä½ç½®ï¼š`~/.openclaw/openclaw.json`

```json
{
  "gateway": {
    "port": 18789,
    "mode": "local",
    "bind": "lan",
    "auth": {
      "mode": "token",
      "token": "UoV4mCuOwgzixikzBuAvkpZnEpdiHoKNs8PBACwy03Y"
    }
  },
  "browser": {
    "enabled": true,
    "headless": false,
    "defaultProfile": "openclaw",
    "profiles": {
      "openclaw": {
        "cdpPort": 18800,
        "color": "#FF4500"
      }
    }
  },
  "channels": {
    "telegram": {
      "enabled": true,
      "botToken": "ä½ çš„_TELEGRAM_BOT_TOKEN",
      "dmPolicy": "pairing"
    }
  },
  "agents": {
    "defaults": {
      "model": {
        "primary": "minimax-portal/MiniMax-M2.5"
      }
    }
  }
}
```

**é‡è¦é…ç½®è¯´æ˜ï¼š**
- `bind: "lan"` - å…è®¸å±€åŸŸç½‘è®¿é—®ï¼ˆå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™åªèƒ½æœ¬åœ°è®¿é—®ï¼‰
- `auth.mode: "token"` - å¯ç”¨ Token è®¤è¯ï¼ˆç”¨äº Node é…å¯¹ï¼‰
- `auth.token` - Gateway çš„è®¤è¯ Tokenï¼ˆå¯ä»¥è‡ªå®šä¹‰ï¼Œå»ºè®®ä½¿ç”¨å¼ºéšæœºå­—ç¬¦ä¸²ï¼‰

**ç”Ÿæˆå®‰å…¨çš„ Tokenï¼š**
```bash
# ä½¿ç”¨ openssl ç”Ÿæˆéšæœº Token
openssl rand -base64 32

# æˆ–ä½¿ç”¨ Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
```

#### 1.3 å¯åŠ¨ Gateway
```bash
# ä½¿ç”¨ systemd ç®¡ç†ï¼ˆæ¨èï¼‰
openclaw gateway start

# æˆ–æ‰‹åŠ¨å¯åŠ¨
openclaw gateway run

# æ£€æŸ¥çŠ¶æ€
openclaw gateway status
```

### é˜¶æ®µ 2ï¼šWindows Node é…ç½®

#### 2.1 å®‰è£… OpenClaw
åœ¨ Windows PowerShell ä¸­ï¼š
```powershell
# å®‰è£… Node.js 22+ (å¦‚æœæœªå®‰è£…)
# ä¸‹è½½ï¼šhttps://nodejs.org/

# å®‰è£… OpenClaw
npm install -g openclaw@latest

# éªŒè¯å®‰è£…
openclaw --version
```

#### 2.2 åˆ›å»º Node é…ç½®æ–‡ä»¶
```powershell
# åˆ›å»ºé…ç½®ç›®å½•
New-Item -ItemType Directory -Force -Path "$env:USERPROFILE\.openclaw"

# åˆ›å»ºé…ç½®æ–‡ä»¶
@"
{
  "browser": {
    "enabled": true,
    "headless": false,
    "defaultProfile": "windows-node",
    "profiles": {
      "windows-node": {
        "cdpPort": 18801,
        "color": "#00FF00",
        "userDataDir": "$env:USERPROFILE\\.openclaw\\browser-profiles\\windows-node"
      }
    }
  },
  "node": {
    "displayName": "Windows-VM",
    "capabilities": ["browser", "filesystem", "shell"]
  }
}
"@ | Out-File -FilePath "$env:USERPROFILE\.openclaw\openclaw.json" -Encoding UTF8
```

#### 2.3 å¯åŠ¨ Nodeï¼ˆé¦–æ¬¡è¿æ¥ï¼‰

```powershell
# é¦–æ¬¡å¯åŠ¨ Nodeï¼ˆä¸éœ€è¦é¢„å…ˆé…ç½® Tokenï¼‰
openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM" --browser

# ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# [node] connecting to gateway ws://192.168.2.134:18789
# [node] pairing request sent, waiting for approval...
```

**é‡è¦**ï¼šé¦–æ¬¡è¿æ¥æ—¶ï¼ŒNode ä¼šè‡ªåŠ¨å‘é€é…å¯¹è¯·æ±‚åˆ° Gatewayï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½® Tokenã€‚

#### 2.4 åœ¨ Linux Gateway ä¸Šæ‰¹å‡†é…å¯¹è¯·æ±‚

**åˆ‡æ¢åˆ° Linux ä¸»æœº**ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# æŸ¥çœ‹å¾…æ‰¹å‡†çš„ Node é…å¯¹è¯·æ±‚
openclaw nodes pending

# ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# Pending node pair requests:
# ID: req_abc123
# Display Name: Windows-VM
# IP: 192.168.2.146
# Capabilities: browser, filesystem, shell
# Requested: 2026-02-23 10:30:15

# æ‰¹å‡†é…å¯¹è¯·æ±‚ï¼ˆä½¿ç”¨ä¸Šé¢æ˜¾ç¤ºçš„ IDï¼‰
openclaw nodes approve req_abc123

# æˆåŠŸåä¼šæ˜¾ç¤ºï¼š
# âœ“ Node pair approved
# Node ID: node_xyz789
# Token generated and sent to node
```

**å›åˆ° Windows**ï¼Œä½ ä¼šçœ‹åˆ° Node è¿æ¥æˆåŠŸï¼š
```
[node] âœ“ paired successfully
[node] node id: node_xyz789
[node] connected to gateway
[node] browser proxy enabled on port 18801
```

#### 2.5 éªŒè¯ Node é…ç½®æ–‡ä»¶

é…å¯¹æˆåŠŸåï¼ŒWindows ä¸Šä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼š

```powershell
# æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat $env:USERPROFILE\.openclaw\node.json

# å†…å®¹ç¤ºä¾‹ï¼š
# {
#   "nodeId": "node_xyz789",
#   "token": "è‡ªåŠ¨ç”Ÿæˆçš„Token",
#   "displayName": "Windows-VM",
#   "gateway": {
#     "host": "192.168.2.134",
#     "port": 18789
#   }
# }
```

**é‡è¦**ï¼šæ­¤æ–‡ä»¶åŒ…å«è®¤è¯ä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ã€‚ä¸‹æ¬¡å¯åŠ¨ Node æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨æ­¤é…ç½®ã€‚

#### 2.6 åå°è¿è¡Œ Nodeï¼ˆå¯é€‰ï¼‰

é…å¯¹æˆåŠŸåï¼Œå¯ä»¥å°† Node å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡ï¼š

```powershell
# å®‰è£…ä¸º Windows æœåŠ¡
openclaw node install --host 192.168.2.134 --port 18789 --display-name "Windows-VM" --browser

# ç®¡ç†æœåŠ¡
openclaw node status    # æŸ¥çœ‹çŠ¶æ€
openclaw node stop      # åœæ­¢æœåŠ¡
openclaw node restart   # é‡å¯æœåŠ¡
openclaw node uninstall # å¸è½½æœåŠ¡
```

æˆ–ä½¿ç”¨ NSSMï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰ï¼š
```powershell
# ä¸‹è½½ NSSM: https://nssm.cc/download
nssm install OpenClawNode "C:\Program Files\nodejs\openclaw.cmd" "node run --host 192.168.2.134 --port 18789 --display-name Windows-VM --browser"
nssm start OpenClawNode
```

### é˜¶æ®µ 3ï¼šéªŒè¯è¿æ¥å’Œé…ç½®å‘½ä»¤æ‰§è¡Œæƒé™

#### 3.1 åœ¨ Linux ä¸Šæ£€æŸ¥è¿æ¥

```bash
# æŸ¥çœ‹ Gateway çŠ¶æ€
openclaw gateway status

# æŸ¥çœ‹å·²è¿æ¥çš„ Nodes
openclaw nodes list

# ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# Connected Nodes:
# ID: node_xyz789
# Name: Windows-VM
# IP: 192.168.2.146
# Status: connected
# Capabilities: browser, filesystem, shell
# Browser Proxy: enabled (port 18801)

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
sudo netstat -tn | grep 18789
# åº”è¯¥çœ‹åˆ°ï¼š192.168.2.134:18789 <-> 192.168.2.146:xxxxx ESTABLISHED
```

#### 3.2 åœ¨ Windows ä¸Šæ£€æŸ¥
```powershell
# æ£€æŸ¥ Node è¿›ç¨‹
Get-Process | Where-Object {$_.ProcessName -like "*node*"}

# æ£€æŸ¥ç½‘ç»œè¿æ¥
netstat -an | Select-String "18789"
# åº”è¯¥çœ‹åˆ°ï¼šTCP 192.168.2.146:xxxxx 192.168.2.134:18789 ESTABLISHED
```

#### 3.3 é…ç½®å‘½ä»¤æ‰§è¡Œæƒé™ï¼ˆé‡è¦ï¼ï¼‰

é»˜è®¤æƒ…å†µä¸‹ï¼ŒNode ä¸å…è®¸æ‰§è¡Œä»»ä½•å‘½ä»¤ã€‚ä½ éœ€è¦åœ¨ Gateway ä¸Šé…ç½®æ‰§è¡Œæƒé™ï¼š

```bash
# æŸ¥çœ‹å½“å‰æ‰§è¡Œæƒé™é…ç½®
openclaw approvals --node Windows-VM

# è¿™ä¼šæ‰“å¼€ç¼–è¾‘å™¨ï¼Œæ·»åŠ å…è®¸çš„å‘½ä»¤ï¼š
# ~/.openclaw/exec-approvals.json
```

**ç¤ºä¾‹é…ç½®**ï¼ˆå…è®¸åŸºæœ¬å‘½ä»¤ï¼‰ï¼š
```json
{
  "nodes": {
    "Windows-VM": {
      "allowedCommands": [
        "dir",
        "ls",
        "echo",
        "type",
        "cat",
        "powershell -Command *",
        "cmd /c *"
      ],
      "allowedPaths": [
        "C:\\Users\\*",
        "C:\\Temp\\*"
      ],
      "denyPatterns": [
        "*rm -rf*",
        "*del /f*",
        "*format*"
      ]
    }
  }
}
```

**æ›´å®½æ¾çš„é…ç½®**ï¼ˆå…è®¸æ‰€æœ‰å‘½ä»¤ï¼Œä»…ç”¨äºæµ‹è¯•ï¼‰ï¼š
```json
{
  "nodes": {
    "Windows-VM": {
      "allowAll": true
    }
  }
}
```

ä¿å­˜åï¼Œæƒé™ç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯ã€‚

### é˜¶æ®µ 4ï¼šé…ç½®ä»»åŠ¡è·¯ç”±

#### 4.1 åœ¨ Gateway é…ç½®ä¸­æŒ‡å®šé»˜è®¤ Node
ç¼–è¾‘ `~/.openclaw/openclaw.json`ï¼š
```json
{
  "agents": {
    "defaults": {
      "target": "node:Windows-VM",
      "model": {
        "primary": "minimax-portal/MiniMax-M2.5"
      }
    }
  }
}
```

#### 4.2 é‡å¯ Gateway ä½¿é…ç½®ç”Ÿæ•ˆ
```bash
openclaw gateway restart
```

### é˜¶æ®µ 5ï¼šé…ç½® Telegram Botï¼ˆå¯é€‰ä½†æ¨èï¼‰

#### 5.1 åˆ›å»º Telegram Bot
1. åœ¨ Telegram æœç´¢ `@BotFather`
2. å‘é€ `/newbot`
3. æŒ‰æç¤ºè®¾ç½® Bot åç§°
4. è·å– Bot Token

#### 5.2 é…ç½® Bot Token
ç¼–è¾‘ `~/.openclaw/openclaw.json`ï¼š
```json
{
  "channels": {
    "telegram": {
      "enabled": true,
      "botToken": "ä½ çš„_BOT_TOKEN",
      "dmPolicy": "pairing",
      "groupPolicy": "allowlist",
      "streamMode": "partial"
    }
  }
}
```

#### 5.3 é…å¯¹ Bot
```bash
# é‡å¯ Gateway
openclaw gateway restart

# åœ¨ Telegram ä¸­ï¼š
# 1. æœç´¢ä½ çš„ Bot
# 2. å‘é€ /start
# 3. å‘é€é…å¯¹ç ï¼ˆGateway æ—¥å¿—ä¸­ä¼šæ˜¾ç¤ºï¼‰
```

---

---

## ç«¯åˆ°ç«¯æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1ï¼šéªŒè¯ Node è¿æ¥

**åœ¨ Linux Gateway ä¸Šï¼š**
```bash
# æŸ¥çœ‹è¿æ¥çš„ Nodes
openclaw nodes list

# é¢„æœŸè¾“å‡ºï¼š
# âœ“ Windows-VM (node_xyz789)
#   Status: connected
#   IP: 192.168.2.146
#   Capabilities: browser, filesystem, shell
```

### æµ‹è¯• 2ï¼šé€šè¿‡ CLI å‘é€å‘½ä»¤åˆ° Node

**åœ¨ Linux Gateway ä¸Šï¼š**
```bash
# å‘é€ç®€å•å‘½ä»¤åˆ° Windows Node
openclaw exec --node Windows-VM --command "echo Hello from Windows"

# é¢„æœŸè¾“å‡ºï¼š
# Hello from Windows
```

### æµ‹è¯• 3ï¼šé€šè¿‡ Telegram æ§åˆ¶ Windows æµè§ˆå™¨

**åœ¨ Telegram ä¸­å‘é€ï¼š**
```
@ä½ çš„Bot target:Windows-VM æ‰“å¼€æµè§ˆå™¨è®¿é—® example.com å¹¶æˆªå›¾
```

**é¢„æœŸæµç¨‹ï¼š**
1. Telegram æ¶ˆæ¯å‘é€åˆ° Gateway
2. Gateway è§£æå¹¶è·¯ç”±åˆ° Windows-VM
3. Windows Node å¯åŠ¨ Chrome
4. è®¿é—® example.com
5. æˆªå›¾å¹¶è¿”å›
6. å›¾ç‰‡å‘é€å› Telegram

**å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥ï¼š**
```bash
# åœ¨ Linux ä¸ŠæŸ¥çœ‹ Gateway æ—¥å¿—
tail -f ~/.openclaw/logs/gateway.log

# åœ¨ Windows ä¸ŠæŸ¥çœ‹ Node æ—¥å¿—ï¼ˆå¦‚æœå‰å°è¿è¡Œï¼‰
# æˆ–æ£€æŸ¥äº‹ä»¶æŸ¥çœ‹å™¨ä¸­çš„æœåŠ¡æ—¥å¿—
```

### æµ‹è¯• 4ï¼šéªŒè¯æµè§ˆå™¨ä»£ç†

**åœ¨ Linux Gateway ä¸Šï¼š**
```bash
# æµ‹è¯•æµè§ˆå™¨ä»£ç†è¿æ¥
curl -v http://192.168.2.146:18801/json/version

# é¢„æœŸè¾“å‡ºï¼š
# {
#   "Browser": "Chrome/xxx",
#   "Protocol-Version": "1.3",
#   "webSocketDebuggerUrl": "ws://192.168.2.146:18801/..."
# }
```

---

## å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šè¿œç¨‹æœç´¢å¹¶æˆªå›¾

**åœ¨ Telegram å‘é€ï¼š**
```
@ä½ çš„Bot åœ¨ Windows è™šæ‹Ÿæœºæ‰“å¼€ç™¾åº¦ï¼Œæœç´¢"OpenClaw æ•™ç¨‹"ï¼Œç„¶åæˆªå›¾
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. Telegram æ¶ˆæ¯ â†’ Gateway
2. Gateway è§£ææ„å›¾ï¼Œè°ƒç”¨ AI æ¨¡å‹
3. AI ç”Ÿæˆæµè§ˆå™¨æ“ä½œæŒ‡ä»¤
4. Gateway è½¬å‘åˆ° Windows Node
5. Node æ‰§è¡Œï¼š
   ```javascript
   - å¯åŠ¨ Chrome
   - è®¿é—® baidu.com
   - è¾“å…¥æœç´¢è¯
   - ç‚¹å‡»æœç´¢
   - ç­‰å¾…é¡µé¢åŠ è½½
   - æˆªå›¾
   ```
6. æˆªå›¾è¿”å›åˆ° Gateway
7. Gateway å‘é€åˆ° Telegram

**é¢„æœŸç»“æœï¼š**
- æ”¶åˆ°ç™¾åº¦æœç´¢ç»“æœé¡µé¢çš„æˆªå›¾
- æ•´ä¸ªè¿‡ç¨‹ 10-20 ç§’

### ç¤ºä¾‹ 2ï¼šè¡¨å•è‡ªåŠ¨å¡«å†™

**åœ¨ Telegram å‘é€ï¼š**
```
@ä½ çš„Bot target:Windows-VM è®¿é—® example.com/formï¼Œå¡«å†™æ³¨å†Œè¡¨å•ï¼š
- ç”¨æˆ·åï¼štestuser
- é‚®ç®±ï¼štest@example.com
- å¯†ç ï¼šTest123!
ç„¶åæäº¤å¹¶å‘Šè¯‰æˆ‘ç»“æœ
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. Gateway è§£æè¡¨å•æ•°æ®
2. è½¬å‘åˆ° Windows Node
3. Node æ‰§è¡Œæµè§ˆå™¨æ“ä½œï¼š
   ```javascript
   - è®¿é—®è¡¨å•é¡µé¢
   - è¯†åˆ«è¡¨å•å­—æ®µ
   - å¡«å†™æ•°æ®
   - ç‚¹å‡»æäº¤æŒ‰é’®
   - ç­‰å¾…å“åº”
   - æ£€æŸ¥æˆåŠŸ/å¤±è´¥æ¶ˆæ¯
   ```
4. è¿”å›æ‰§è¡Œç»“æœ

### ç¤ºä¾‹ 3ï¼šå¤š Node å¹¶è¡Œä»»åŠ¡

**é…ç½®å¤šä¸ª Nodeï¼š**
- Node 1 (Windows VM 1): "Windows-VM-1"
- Node 2 (Windows VM 2): "Windows-VM-2"

**åœ¨ Telegram å‘é€ï¼š**
```
@ä½ çš„Bot åŒæ—¶æ‰§è¡Œï¼š
1. åœ¨ Windows-VM-1 ä¸Šæ£€æŸ¥ç½‘ç«™ A çš„ä»·æ ¼
2. åœ¨ Windows-VM-2 ä¸Šæ£€æŸ¥ç½‘ç«™ B çš„ä»·æ ¼
ç„¶åæ¯”è¾ƒç»“æœ
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. Gateway åˆ†è§£ä»»åŠ¡
2. å¹¶è¡Œå‘é€åˆ°ä¸¤ä¸ª Node
3. ä¸¤ä¸ª Node åŒæ—¶æ‰§è¡Œ
4. Gateway æ”¶é›†ç»“æœ
5. AI åˆ†æå¹¶æ¯”è¾ƒ
6. è¿”å›æ±‡æ€»æŠ¥å‘Š

### ç¤ºä¾‹ 4ï¼šå®šæ—¶ä»»åŠ¡

**é…ç½®å®šæ—¶ä»»åŠ¡ï¼š**
ç¼–è¾‘ `~/.openclaw/openclaw.json`ï¼š
```json
{
  "cron": {
    "jobs": {
      "daily-check": {
        "schedule": "0 9 * * *",
        "target": "node:Windows-VM",
        "command": "browser",
        "args": {
          "action": "navigate",
          "url": "https://example.com/dashboard",
          "then": "screenshot"
        },
        "notify": "telegram"
      }
    }
  }
}
```

**æ•ˆæœï¼š**
- æ¯å¤©æ—©ä¸Š 9 ç‚¹è‡ªåŠ¨æ‰§è¡Œ
- Windows Node æ‰“å¼€æµè§ˆå™¨
- è®¿é—®æŒ‡å®šé¡µé¢
- æˆªå›¾å¹¶å‘é€åˆ° Telegram

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šNode æ— æ³•è¿æ¥åˆ° Gateway

**ç—‡çŠ¶ï¼š**
```
gateway connect failed: connect ECONNREFUSED 192.168.2.134:18789
```

**æ’æŸ¥æ­¥éª¤ï¼š**
```bash
# 1. æ£€æŸ¥ Gateway æ˜¯å¦è¿è¡Œ
openclaw gateway status

# 2. æ£€æŸ¥é˜²ç«å¢™
sudo ufw status | grep 18789

# 3. æ£€æŸ¥ç«¯å£ç›‘å¬
sudo netstat -tlnp | grep 18789

# 4. æµ‹è¯•ç½‘ç»œè¿é€šæ€§ï¼ˆåœ¨ Windows ä¸Šï¼‰
Test-NetConnection -ComputerName 192.168.2.134 -Port 18789
```

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®ä¿ Gateway æ­£åœ¨è¿è¡Œ
- ç¡®ä¿é˜²ç«å¢™å…è®¸ 18789 ç«¯å£
- æ£€æŸ¥ IP åœ°å€æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 2ï¼šNode é…å¯¹å¤±è´¥

**ç—‡çŠ¶ï¼š**
```
[node] pairing request sent, waiting for approval...
[node] pairing timeout after 60s
```

**åŸå› ï¼š**
- Gateway æœªè¿è¡Œ
- é˜²ç«å¢™é˜»æ­¢è¿æ¥
- æœªåœ¨ Gateway ä¸Šæ‰¹å‡†é…å¯¹è¯·æ±‚

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åœ¨ Linux Gateway ä¸Šï¼š
# 1. ç¡®è®¤ Gateway æ­£åœ¨è¿è¡Œ
openclaw gateway status

# 2. æŸ¥çœ‹å¾…æ‰¹å‡†çš„è¯·æ±‚
openclaw nodes pending

# 3. æ‰¹å‡†è¯·æ±‚
openclaw nodes approve <request-id>

# 4. å¦‚æœæ²¡æœ‰çœ‹åˆ°è¯·æ±‚ï¼Œæ£€æŸ¥ Gateway æ—¥å¿—
tail -f ~/.openclaw/logs/gateway.log
```

### é—®é¢˜ 3ï¼šToken è®¤è¯å¤±è´¥ï¼ˆå·²é…å¯¹çš„ Nodeï¼‰

**ç—‡çŠ¶ï¼š**
```
[node] authentication failed: invalid token
```

**åŸå› ï¼š**
- node.json æ–‡ä»¶æŸå
- Gateway é‡ç½®äº† Token
- æ‰‹åŠ¨ä¿®æ”¹äº†é…ç½®æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆï¼š**
```powershell
# Windows ä¸Šï¼š
# 1. åˆ é™¤æ—§çš„é…å¯¹ä¿¡æ¯
Remove-Item $env:USERPROFILE\.openclaw\node.json

# 2. é‡æ–°å¯åŠ¨ Nodeï¼ˆä¼šåˆ›å»ºæ–°çš„é…å¯¹è¯·æ±‚ï¼‰
openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM" --browser

# 3. åœ¨ Linux Gateway ä¸Šé‡æ–°æ‰¹å‡†
openclaw nodes pending
openclaw nodes approve <new-request-id>
```

### é—®é¢˜ 4ï¼šå‘½ä»¤æ‰§è¡Œè¢«æ‹’ç»

**ç—‡çŠ¶ï¼š**
```
[agent] command execution denied: not in allowlist
```

**åŸå› ï¼š**
Node çš„æ‰§è¡Œæƒé™æœªé…ç½®

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åœ¨ Linux Gateway ä¸Šé…ç½®æƒé™
openclaw approvals --node Windows-VM

# æ·»åŠ å…è®¸çš„å‘½ä»¤ï¼Œä¿å­˜åç«‹å³ç”Ÿæ•ˆ
```

### é—®é¢˜ 5ï¼šæµè§ˆå™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶ï¼š**
```
Browser disabled or not available
```

**æ’æŸ¥æ­¥éª¤ï¼š**
```powershell
# 1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å®‰è£…
where chrome
where msedge

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
cat $env:USERPROFILE\.openclaw\openclaw.json

# 3. æ‰‹åŠ¨æµ‹è¯•æµè§ˆå™¨
chrome --remote-debugging-port=18801
```

**è§£å†³æ–¹æ¡ˆï¼š**
- å®‰è£… Chrome æˆ– Edge
- ç¡®ä¿é…ç½®æ–‡ä»¶ä¸­ `browser.enabled: true`
- å¯åŠ¨ Node æ—¶æ·»åŠ  `--browser` å‚æ•°

### é—®é¢˜ 6ï¼šä»»åŠ¡æœªè·¯ç”±åˆ° Node

**ç—‡çŠ¶ï¼š**
ä»»åŠ¡åœ¨ Gateway æœ¬åœ°æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨ Node ä¸Š

**è§£å†³æ–¹æ¡ˆï¼š**
```json
// åœ¨ Gateway é…ç½®ä¸­æ˜ç¡®æŒ‡å®š
{
  "agents": {
    "defaults": {
      "target": "node:Windows-VM"
    }
  }
}
```

æˆ–åœ¨æ¶ˆæ¯ä¸­æŒ‡å®šï¼š
```
@ä½ çš„Bot target:Windows-VM æ‰§è¡Œä»»åŠ¡
```

### é—®é¢˜ 7ï¼šè¿æ¥é¢‘ç¹æ–­å¼€

**ç—‡çŠ¶ï¼š**
```
node host gateway closed (1006)
```

**å¯èƒ½åŸå› ï¼š**
- ç½‘ç»œä¸ç¨³å®š
- Gateway é‡å¯
- Token è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆï¼š**
```powershell
# ä½¿ç”¨è‡ªåŠ¨é‡è¿è„šæœ¬
while ($true) {
    openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM" --browser
    Start-Sleep -Seconds 5
}
```

---

## é«˜çº§é…ç½®

### å¤š Node è´Ÿè½½å‡è¡¡

```json
{
  "agents": {
    "defaults": {
      "target": "auto",
      "targetStrategy": "round-robin"
    },
    "nodes": {
      "Windows-VM-1": {
        "weight": 2,
        "capabilities": ["browser", "heavy-tasks"]
      },
      "Windows-VM-2": {
        "weight": 1,
        "capabilities": ["browser", "light-tasks"]
      }
    }
  }
}
```

### å®‰å…¨åŠ å›º

```json
{
  "gateway": {
    "auth": {
      "mode": "token",
      "token": "ä½¿ç”¨å¼ºéšæœºToken",
      "rotateInterval": "7d"
    },
    "rateLimit": {
      "enabled": true,
      "maxRequests": 100,
      "window": "1m"
    }
  },
  "channels": {
    "telegram": {
      "allowFrom": ["+86138xxxxxxxx"],
      "groupPolicy": "allowlist",
      "allowedGroups": [-1001234567890]
    }
  }
}
```

### æ—¥å¿—å’Œç›‘æ§

```json
{
  "logging": {
    "level": "info",
    "file": "~/.openclaw/logs/gateway.log",
    "maxSize": "100MB",
    "maxFiles": 10
  },
  "monitoring": {
    "enabled": true,
    "metrics": {
      "port": 18790,
      "path": "/metrics"
    }
  }
}
```

---

## å¸¸è§é—®é¢˜è§£ç­” (FAQ)

### Q1: ä¸ºä»€ä¹ˆéœ€è¦é…å¯¹ï¼Ÿç›´æ¥ç”¨ Token ä¸è¡Œå—ï¼Ÿ
A: é…å¯¹æœºåˆ¶æä¾›äº†æ›´å¥½çš„å®‰å…¨æ€§å’Œç®¡ç†ï¼š
- ç®¡ç†å‘˜å¯ä»¥å®¡æ ¸æ¯ä¸ªè¿æ¥è¯·æ±‚
- è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„ Tokenï¼Œé¿å… Token æ³„éœ²
- å¯ä»¥éšæ—¶æ’¤é”€æŸä¸ª Node çš„è®¿é—®æƒé™
- æ”¯æŒå¤šä¸ª Node ä½¿ç”¨ä¸åŒçš„ Token

### Q2: é…å¯¹å Token ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ
A: 
- Windows Node: `%USERPROFILE%\.openclaw\node.json`
- Linux Node: `~/.openclaw/node.json`
- Gateway: `~/.openclaw/gateway-state.json`ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰

### Q3: å¦‚ä½•é‡ç½®é…å¯¹ï¼Ÿ
A:
```bash
# åœ¨ Gateway ä¸Šåˆ é™¤ Node
openclaw nodes remove Windows-VM

# åœ¨ Windows ä¸Šåˆ é™¤é…å¯¹ä¿¡æ¯
Remove-Item $env:USERPROFILE\.openclaw\node.json

# é‡æ–°å¯åŠ¨ Node å¹¶é…å¯¹
openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM"
```

### Q4: å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ª Node å—ï¼Ÿ
A: å¯ä»¥ï¼æ¯ä¸ª Node ä½¿ç”¨ä¸åŒçš„ `--display-name`ï¼š
```powershell
# Windows VM 1
openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM-1"

# Windows VM 2
openclaw node run --host 192.168.2.134 --port 18789 --display-name "Windows-VM-2"
```

### Q5: Node æ–­çº¿åä¼šè‡ªåŠ¨é‡è¿å—ï¼Ÿ
A: ä¼šï¼Node å†…ç½®è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼š
- æ–­çº¿åæ¯ 5 ç§’å°è¯•é‡è¿
- ä½¿ç”¨ä¿å­˜çš„ Token è‡ªåŠ¨è®¤è¯
- æ— éœ€æ‰‹åŠ¨å¹²é¢„

### Q6: å¦‚ä½•æŒ‡å®šä»»åŠ¡åœ¨ç‰¹å®š Node ä¸Šæ‰§è¡Œï¼Ÿ
A: ä¸‰ç§æ–¹å¼ï¼š
```bash
# æ–¹å¼ 1: åœ¨æ¶ˆæ¯ä¸­æŒ‡å®š
@ä½ çš„Bot target:Windows-VM æ‰§è¡Œä»»åŠ¡

# æ–¹å¼ 2: åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®é»˜è®¤
{
  "agents": {
    "defaults": {
      "target": "node:Windows-VM"
    }
  }
}

# æ–¹å¼ 3: ä½¿ç”¨ CLI
openclaw exec --node Windows-VM --command "..."
```

### Q7: æµè§ˆå™¨ä»£ç†æ˜¯ä»€ä¹ˆï¼Ÿ
A: Node è‡ªåŠ¨æš´éœ²æœ¬åœ°æµè§ˆå™¨çš„ CDP (Chrome DevTools Protocol) æ¥å£ï¼š
- Gateway å¯ä»¥è¿œç¨‹æ§åˆ¶ Node ä¸Šçš„æµè§ˆå™¨
- æ— éœ€é¢å¤–é…ç½®
- æ”¯æŒæˆªå›¾ã€è¡¨å•å¡«å†™ã€é¡µé¢å¯¼èˆªç­‰æ“ä½œ

### Q8: å¦‚ä½•æŸ¥çœ‹ Node çš„æ—¥å¿—ï¼Ÿ
A:
```powershell
# å‰å°è¿è¡Œæ—¶ç›´æ¥æ˜¾ç¤ºåœ¨ç»ˆç«¯

# æœåŠ¡è¿è¡Œæ—¶ï¼š
# Windows äº‹ä»¶æŸ¥çœ‹å™¨ â†’ Windows æ—¥å¿— â†’ åº”ç”¨ç¨‹åº

# æˆ–ä½¿ç”¨ NSSM
nssm status OpenClawNode
```

### Q9: Gateway å’Œ Node å¿…é¡»åœ¨åŒä¸€å±€åŸŸç½‘å—ï¼Ÿ
A: ä¸ä¸€å®šï¼š
- å±€åŸŸç½‘ï¼šç›´æ¥è¿æ¥ï¼ˆæœ€ç®€å•ï¼‰
- å…¬ç½‘ï¼šéœ€è¦é…ç½®ç«¯å£è½¬å‘æˆ– VPN
- Tailscaleï¼šæ¨èç”¨äºè¿œç¨‹è®¿é—®ï¼ˆå®˜æ–¹æ”¯æŒï¼‰

### Q10: å¦‚ä½•ä¿æŠ¤ Gateway å®‰å…¨ï¼Ÿ
A:
```json
{
  "gateway": {
    "auth": {
      "mode": "token",
      "token": "ä½¿ç”¨å¼ºéšæœºToken"
    },
    "rateLimit": {
      "enabled": true,
      "maxRequests": 100,
      "window": "1m"
    },
    "allowedIPs": ["192.168.2.0/24"]
  }
}
```

---

## æ€»ç»“

é€šè¿‡è¿™å¥—é…ç½®ï¼Œä½ å¯ä»¥å®ç°ï¼š

âœ… **è¿œç¨‹æ§åˆ¶**ï¼šé€šè¿‡ Telegram æ§åˆ¶ Windows è™šæ‹Ÿæœºçš„æµè§ˆå™¨  
âœ… **ç¯å¢ƒéš”ç¦»**ï¼šæ¯ä¸ª Node ç‹¬ç«‹çš„æµè§ˆå™¨ç¯å¢ƒå’ŒæŒ‡çº¹  
âœ… **çµæ´»è°ƒåº¦**ï¼šåŠ¨æ€åˆ†é…ä»»åŠ¡åˆ°ä¸åŒçš„ Node  
âœ… **å®‰å…¨å¯é **ï¼šToken è®¤è¯ + è™šæ‹Ÿæœºéš”ç¦»  
âœ… **å¯æ‰©å±•**ï¼šè½»æ¾æ·»åŠ æ›´å¤š Node  

è¿™æ˜¯ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„åˆ†å¸ƒå¼ AI åŠ©æ‰‹æ¶æ„ï¼Œé€‚åˆå¤šè´¦å·ç®¡ç†ã€å®‰å…¨æµ‹è¯•ã€è·¨å¹³å°å¼€å‘ç­‰åœºæ™¯ã€‚
