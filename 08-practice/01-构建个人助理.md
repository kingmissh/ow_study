# å®è·µé¡¹ç›®ï¼šæ„å»ºä¸ªäºº AI åŠ©ç†

## é¡¹ç›®ç›®æ ‡

æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä¸ªäºº AI åŠ©ç†ï¼Œå…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼š
- ğŸ“§ é‚®ä»¶ç®¡ç†
- ğŸ“… æ—¥ç¨‹ç®¡ç†
- ğŸ“ ç¬”è®°è®°å½•
- ğŸ”” æé†’åŠŸèƒ½
- ğŸ“Š æ•°æ®åˆ†æ

---

## é¡¹ç›®æ¶æ„

```
personal-assistant/
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ email-manager/      # é‚®ä»¶ç®¡ç†æŠ€èƒ½
â”‚   â”œâ”€â”€ calendar-sync/      # æ—¥å†åŒæ­¥æŠ€èƒ½
â”‚   â”œâ”€â”€ note-taker/         # ç¬”è®°æŠ€èƒ½
â”‚   â””â”€â”€ reminder/           # æé†’æŠ€èƒ½
â”œâ”€â”€ config/
â”‚   â””â”€â”€ assistant.json      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ system-prompt.md    # ç³»ç»Ÿ Prompt
â””â”€â”€ README.md
```

---

## ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… OpenClaw

```bash
# å¦‚æœè¿˜æ²¡å®‰è£…
curl -fsSL https://openclaw.ai/install.sh | bash

# æˆ–ä½¿ç”¨å·²æœ‰å®‰è£…
openclaw --version
```

### 2. åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
mkdir personal-assistant
cd personal-assistant
mkdir skills config prompts
```

### 3. åˆå§‹åŒ–é…ç½®

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > config/assistant.json << 'EOF'
{
  "name": "Personal Assistant",
  "version": "1.0.0",
  "description": "My personal AI assistant",
  "channels": ["telegram"],
  "skills": [
    "email-manager",
    "calendar-sync",
    "note-taker",
    "reminder"
  ]
}
EOF
```

---

## ç¬¬äºŒæ­¥ï¼šå¼€å‘é‚®ä»¶ç®¡ç†æŠ€èƒ½

### åˆ›å»ºæŠ€èƒ½ç»“æ„

```bash
cd skills
mkdir email-manager
cd email-manager
```

### skill.json

```json
{
  "name": "email-manager",
  "version": "1.0.0",
  "description": "Manage emails via Gmail API",
  "runtime": "node",
  "entry": "index.js",
  "tools": [
    {
      "name": "list_emails",
      "description": "List recent emails",
      "parameters": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "number",
            "description": "Number of emails to fetch",
            "default": 10
          },
          "unread_only": {
            "type": "boolean",
            "description": "Only fetch unread emails",
            "default": false
          }
        }
      }
    },
    {
      "name": "send_email",
      "description": "Send an email",
      "parameters": {
        "type": "object",
        "properties": {
          "to": {
            "type": "string",
            "description": "Recipient email address"
          },
          "subject": {
            "type": "string",
            "description": "Email subject"
          },
          "body": {
            "type": "string",
            "description": "Email body"
          }
        },
        "required": ["to", "subject", "body"]
      }
    }
  ],
  "permissions": ["network"],
  "config": {
    "gmail_credentials": {
      "type": "string",
      "required": true,
      "description": "Gmail API credentials JSON"
    }
  }
}
```

### index.js

```javascript
import { google } from 'googleapis';

export default {
  gmail: null,
  
  async init(config) {
    // åˆå§‹åŒ– Gmail API
    const auth = new google.auth.OAuth2(
      config.clientId,
      config.clientSecret,
      config.redirectUri
    );
    
    auth.setCredentials({
      refresh_token: config.refreshToken
    });
    
    this.gmail = google.gmail({ version: 'v1', auth });
  },
  
  tools: {
    async list_emails(args, context) {
      const { limit = 10, unread_only = false } = args;
      
      try {
        const query = unread_only ? 'is:unread' : '';
        
        const response = await this.gmail.users.messages.list({
          userId: 'me',
          maxResults: limit,
          q: query
        });
        
        const messages = response.data.messages || [];
        
        // è·å–é‚®ä»¶è¯¦æƒ…
        const emails = await Promise.all(
          messages.map(async (msg) => {
            const detail = await this.gmail.users.messages.get({
              userId: 'me',
              id: msg.id
            });
            
            const headers = detail.data.payload.headers;
            const subject = headers.find(h => h.name === 'Subject')?.value;
            const from = headers.find(h => h.name === 'From')?.value;
            const date = headers.find(h => h.name === 'Date')?.value;
            
            return {
              id: msg.id,
              subject,
              from,
              date,
              snippet: detail.data.snippet
            };
          })
        );
        
        return {
          count: emails.length,
          emails
        };
      } catch (error) {
        context.logger.error('Failed to list emails', error);
        throw new Error(`Failed to list emails: ${error.message}`);
      }
    },
    
    async send_email(args, context) {
      const { to, subject, body } = args;
      
      try {
        const email = [
          `To: ${to}`,
          `Subject: ${subject}`,
          '',
          body
        ].join('\n');
        
        const encodedEmail = Buffer.from(email)
          .toString('base64')
          .replace(/\+/g, '-')
          .replace(/\//g, '_')
          .replace(/=+$/, '');
        
        const response = await this.gmail.users.messages.send({
          userId: 'me',
          requestBody: {
            raw: encodedEmail
          }
        });
        
        return {
          success: true,
          messageId: response.data.id
        };
      } catch (error) {
        context.logger.error('Failed to send email', error);
        throw new Error(`Failed to send email: ${error.message}`);
      }
    }
  },
  
  async cleanup() {
    // æ¸…ç†èµ„æº
    this.gmail = null;
  }
};
```

### package.json

```json
{
  "name": "email-manager",
  "version": "1.0.0",
  "type": "module",
  "dependencies": {
    "googleapis": "^128.0.0"
  }
}
```

---

## ç¬¬ä¸‰æ­¥ï¼šå¼€å‘æ—¥å†åŒæ­¥æŠ€èƒ½

### calendar-sync/skill.json

```json
{
  "name": "calendar-sync",
  "version": "1.0.0",
  "description": "Sync with Google Calendar",
  "runtime": "node",
  "entry": "index.js",
  "tools": [
    {
      "name": "list_events",
      "description": "List upcoming calendar events",
      "parameters": {
        "type": "object",
        "properties": {
          "days": {
            "type": "number",
            "description": "Number of days to look ahead",
            "default": 7
          }
        }
      }
    },
    {
      "name": "create_event",
      "description": "Create a calendar event",
      "parameters": {
        "type": "object",
        "properties": {
          "summary": {
            "type": "string",
            "description": "Event title"
          },
          "start": {
            "type": "string",
            "description": "Start time (ISO 8601)"
          },
          "end": {
            "type": "string",
            "description": "End time (ISO 8601)"
          },
          "description": {
            "type": "string",
            "description": "Event description"
          }
        },
        "required": ["summary", "start", "end"]
      }
    }
  ]
}
```

### calendar-sync/index.js

```javascript
import { google } from 'googleapis';

export default {
  calendar: null,
  
  async init(config) {
    const auth = new google.auth.OAuth2(
      config.clientId,
      config.clientSecret,
      config.redirectUri
    );
    
    auth.setCredentials({
      refresh_token: config.refreshToken
    });
    
    this.calendar = google.calendar({ version: 'v3', auth });
  },
  
  tools: {
    async list_events(args, context) {
      const { days = 7 } = args;
      
      const now = new Date();
      const future = new Date();
      future.setDate(future.getDate() + days);
      
      const response = await this.calendar.events.list({
        calendarId: 'primary',
        timeMin: now.toISOString(),
        timeMax: future.toISOString(),
        singleEvents: true,
        orderBy: 'startTime'
      });
      
      const events = response.data.items.map(event => ({
        id: event.id,
        summary: event.summary,
        start: event.start.dateTime || event.start.date,
        end: event.end.dateTime || event.end.date,
        description: event.description
      }));
      
      return { count: events.length, events };
    },
    
    async create_event(args, context) {
      const { summary, start, end, description } = args;
      
      const event = {
        summary,
        description,
        start: { dateTime: start },
        end: { dateTime: end }
      };
      
      const response = await this.calendar.events.insert({
        calendarId: 'primary',
        requestBody: event
      });
      
      return {
        success: true,
        eventId: response.data.id,
        link: response.data.htmlLink
      };
    }
  }
};
```

---

## ç¬¬å››æ­¥ï¼šé…ç½®ç³»ç»Ÿ Prompt

### prompts/system-prompt.md

```markdown
# Personal Assistant

You are a helpful personal assistant with access to the following capabilities:

## Email Management
- List and read emails
- Send emails
- Search emails

## Calendar Management
- View upcoming events
- Create new events
- Update or cancel events

## Note Taking
- Create notes
- Search notes
- Organize notes

## Reminders
- Set reminders
- List reminders
- Complete reminders

## Guidelines

1. **Proactive**: Suggest actions based on context
2. **Organized**: Keep information well-structured
3. **Efficient**: Batch similar tasks together
4. **Privacy**: Never share sensitive information
5. **Helpful**: Always try to solve the user's problem

## Examples

User: "What's on my calendar today?"
Assistant: *Uses list_events tool* "You have 3 events today: ..."

User: "Send an email to john@example.com about the meeting"
Assistant: *Uses send_email tool* "I've sent the email to John..."

User: "Remind me to call Sarah tomorrow at 2pm"
Assistant: *Uses create_reminder tool* "I've set a reminder for tomorrow at 2pm..."
```

---

## ç¬¬äº”æ­¥ï¼šé›†æˆåˆ° OpenClaw

### 1. å®‰è£…æŠ€èƒ½

```bash
# ä»æœ¬åœ°å®‰è£…
openclaw skill install ./skills/email-manager
openclaw skill install ./skills/calendar-sync
```

### 2. é…ç½® OpenClaw

ç¼–è¾‘ `~/.openclaw/openclaw.json`:

```json
{
  "agents": {
    "defaults": {
      "systemPrompt": "file://./prompts/system-prompt.md"
    }
  },
  "skills": {
    "entries": {
      "email-manager": {
        "enabled": true,
        "clientId": "your-client-id",
        "clientSecret": "your-client-secret",
        "refreshToken": "your-refresh-token"
      },
      "calendar-sync": {
        "enabled": true,
        "clientId": "your-client-id",
        "clientSecret": "your-client-secret",
        "refreshToken": "your-refresh-token"
      }
    }
  }
}
```

### 3. é‡å¯ OpenClaw

```bash
openclaw restart
```

---

## ç¬¬å…­æ­¥ï¼šæµ‹è¯•

### æµ‹è¯•é‚®ä»¶åŠŸèƒ½

åœ¨ Telegram ä¸­å‘é€ï¼š
```
åˆ—å‡ºæˆ‘æœ€è¿‘çš„ 5 å°æœªè¯»é‚®ä»¶
```

### æµ‹è¯•æ—¥å†åŠŸèƒ½

```
æˆ‘ä¸‹å‘¨æœ‰ä»€ä¹ˆå®‰æ’ï¼Ÿ
```

### æµ‹è¯•åˆ›å»ºäº‹ä»¶

```
å¸®æˆ‘åœ¨æ˜å¤©ä¸‹åˆ 3 ç‚¹åˆ›å»ºä¸€ä¸ªä¼šè®®ï¼Œä¸»é¢˜æ˜¯"é¡¹ç›®è®¨è®º"
```

---

## æ‰©å±•åŠŸèƒ½

### 1. æ·»åŠ æ™ºèƒ½æé†’

```javascript
// reminder/index.js
export default {
  tools: {
    async set_reminder(args, context) {
      const { message, time } = args;
      
      // è§£ææ—¶é—´
      const reminderTime = new Date(time);
      
      // å­˜å‚¨æé†’
      await context.storage.save('reminders', {
        userId: context.user.id,
        message,
        time: reminderTime,
        status: 'pending'
      });
      
      // è®¾ç½®å®šæ—¶ä»»åŠ¡
      await context.scheduler.schedule(reminderTime, async () => {
        await context.sendMessage(context.user.id, `â° æé†’: ${message}`);
      });
      
      return { success: true };
    }
  }
};
```

### 2. æ·»åŠ æ•°æ®åˆ†æ

```python
# data-analyzer/index.py
import pandas as pd

def analyze_emails(args, context):
    emails = args['emails']
    
    df = pd.DataFrame(emails)
    
    # åˆ†æå‘ä»¶äºº
    top_senders = df['from'].value_counts().head(10)
    
    # åˆ†ææ—¶é—´åˆ†å¸ƒ
    df['hour'] = pd.to_datetime(df['date']).dt.hour
    hourly_dist = df['hour'].value_counts().sort_index()
    
    return {
        'top_senders': top_senders.to_dict(),
        'hourly_distribution': hourly_dist.to_dict()
    }
```

---

## å­¦ä¹ æ£€æŸ¥ç‚¹

å®Œæˆæœ¬é¡¹ç›®åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- [ ] æ„å»ºå®Œæ•´çš„æŠ€èƒ½
- [ ] é›†æˆå¤šä¸ª API
- [ ] é…ç½®ç³»ç»Ÿ Prompt
- [ ] æµ‹è¯•å’Œè°ƒè¯•æŠ€èƒ½
- [ ] æ‰©å±•åŠŸèƒ½

---

## ä¸‹ä¸€æ­¥

- [02-æ„å»ºå›¢é˜Ÿåä½œåŠ©æ‰‹.md](./02-æ„å»ºå›¢é˜Ÿåä½œåŠ©æ‰‹.md)
- [03-æ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹.md](./03-æ„å»ºä»£ç å®¡æŸ¥åŠ©æ‰‹.md)
