# 第一个 OpenClaw 示例

## 目标

通过实际操作，理解 OpenClaw 的基本工作流程：
1. 发送消息给 AI
2. AI 执行系统任务
3. 返回结果

---

## 示例 1：文件操作

### 任务：让 AI 创建一个文本文件

**在 Telegram 中发送**：
```
请在我的工作空间创建一个名为 hello.txt 的文件，内容是 "Hello from OpenClaw!"
```

### 预期流程

1. **消息接收**：OpenClaw 接收到你的消息
2. **意图理解**：AI 理解你要创建文件
3. **工具调用**：AI 调用文件系统工具
4. **执行操作**：在工作空间创建文件
5. **返回结果**：AI 确认文件已创建

### 验证结果

```bash
# 查看工作空间
ls ~/.openclaw/workspace/

# 查看文件内容
cat ~/.openclaw/workspace/hello.txt
```

---

## 示例 2：命令执行

### 任务：获取系统信息

**发送消息**：
```
帮我查看当前系统的 CPU 和内存使用情况
```

### AI 可能执行的命令

**Linux/macOS**:
```bash
top -bn1 | head -20
free -h
```

**Windows**:
```powershell
Get-Process | Sort-Object CPU -Descending | Select-Object -First 10
```

### 学习要点

- AI 会根据操作系统选择合适的命令
- 可以执行复杂的命令组合
- 结果会被解析并以友好的方式呈现

---

## 示例 3：多步骤任务

### 任务：创建项目结构

**发送消息**：
```
帮我创建一个简单的 Node.js 项目结构：
- 项目名称：my-app
- 包含 src、tests、docs 目录
- 创建 package.json
- 创建 README.md
```

### AI 执行步骤

1. 创建项目根目录
2. 创建子目录结构
3. 生成 package.json
4. 生成 README.md
5. 确认完成

### 验证结果

```bash
cd ~/.openclaw/workspace/my-app
tree
```

预期结构：
```
my-app/
├── src/
├── tests/
├── docs/
├── package.json
└── README.md
```

---

## 示例 4：使用技能

### 前提：安装 Notion 技能

```bash
openclaw skill install notion
```

### 任务：创建 Notion 页面

**发送消息**：
```
在我的 Notion 中创建一个新页面，标题是 "OpenClaw 学习笔记"，内容包括今天学到的要点
```

### 配置 Notion 技能

在 `openclaw.json` 中添加：
```json
{
  "skills": {
    "entries": {
      "notion": {
        "apiKey": "your-notion-api-key"
      }
    }
  }
}
```

---

## 示例 5：持久化对话

### 测试长期记忆

**第一条消息**：
```
我最喜欢的编程语言是 Python
```

**第二条消息（稍后发送）**：
```
用我最喜欢的编程语言写一个 Hello World
```

### 预期行为

AI 应该记住你喜欢 Python，并用 Python 编写代码：

```python
print("Hello World")
```

---

## 示例 6：浏览器控制

### 任务：搜索信息

**发送消息**：
```
帮我搜索 "OpenClaw GitHub" 并告诉我 star 数量
```

### AI 执行流程

1. 打开浏览器
2. 访问搜索引擎
3. 搜索关键词
4. 提取信息
5. 返回结果

---

## 实践练习

### 练习 1：文件管理

创建一个脚本，让 AI：
1. 创建 5 个测试文件
2. 列出所有文件
3. 删除其中 2 个
4. 重命名剩余文件

### 练习 2：数据处理

让 AI：
1. 创建一个 CSV 文件
2. 添加一些数据
3. 读取并分析数据
4. 生成统计报告

### 练习 3：自动化任务

设置一个定时任务：
1. 每天早上 9 点
2. 检查天气
3. 发送提醒消息

---

## 调试技巧

### 查看日志

```bash
# 实时查看日志
tail -f ~/.openclaw/logs/openclaw.log

# 搜索错误
grep ERROR ~/.openclaw/logs/openclaw.log
```

### 启用详细日志

在 `openclaw.json` 中：
```json
{
  "logging": {
    "level": "debug"
  }
}
```

### 测试 API 调用

```bash
# 直接调用 Gateway API
curl -X POST http://localhost:18900/api/message \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{
    "message": "Hello",
    "userId": "test-user"
  }'
```

---

## 常见错误处理

### 1. 权限不足

**错误**：`Permission denied`

**解决**：
```bash
chmod +x ~/.openclaw/workspace
```

### 2. 模型响应超时

**错误**：`Request timeout`

**解决**：增加超时时间
```json
{
  "agents": {
    "defaults": {
      "timeout": 60000
    }
  }
}
```

### 3. 技能未找到

**错误**：`Skill not found`

**解决**：
```bash
openclaw skill list
openclaw skill install <skill-name>
```

---

## 性能优化建议

### 1. 使用更快的模型

对于简单任务，使用轻量级模型：
```json
{
  "agents": {
    "defaults": {
      "model": {
        "primary": "openai/gpt-3.5-turbo"
      }
    }
  }
}
```

### 2. 启用缓存

```json
{
  "agents": {
    "defaults": {
      "cache": {
        "enabled": true,
        "ttl": 3600
      }
    }
  }
}
```

### 3. 限制并发

```json
{
  "agents": {
    "defaults": {
      "maxConcurrent": 2
    }
  }
}
```

---

## 学习检查点

完成本节后，你应该能够：
- [ ] 通过消息平台与 AI 交互
- [ ] 让 AI 执行文件操作
- [ ] 让 AI 执行系统命令
- [ ] 理解多步骤任务的执行流程
- [ ] 使用至少一个技能
- [ ] 测试持久化对话功能
- [ ] 查看和分析日志

---

## 下一步

恭喜完成基础阶段！接下来深入学习架构：

[../02-architecture/01-整体架构.md](../02-architecture/01-整体架构.md)
